{
  "type": "object",
  "title": "Component configuration",
  "required": [
    "destination",
    "preserve_insertion_order",
    "debug"
  ],
  "properties": {
    "destination": {
      "type": "object",
      "title": "Data Destination",
      "required": [
        "container_name",
        "blob_name"
      ],
      "properties": {
        "helper_access_method": {
          "type": "string",
          "title": "Helper Access Method",
          "options": {
            "hidden": true
          },
          "template": "{{val}}",
          "watch": {
            "val": "_metadata_.root.parameters.access_method"
          },
          "propertyOrder": 20
        },
        "container_name": {
          "type": "string",
          "title": "Container name",
          "options": {
            "dependencies": {
              "helper_access_method": "direct_storage"
            }
          },
          "propertyOrder": 1
        },
        "blob_name": {
          "type": "string",
          "title": "Blob name",
          "options": {
            "dependencies": {
              "helper_access_method": "direct_storage"
            }
          },
          "propertyOrder": 2
        },
        "catalog": {
          "title": "Catalog",
          "type": "string",
          "format": "select",
          "enum": [],
          "options": {
            "dependencies": {
              "helper_access_method": "unity_catalog"
            },
            "async": {
              "label": "Load catalogs",
              "action": "list_uc_catalogs"
            }
          },
          "propertyOrder": 3
        },
        "schema_name": {
          "title": "Schema",
          "type": "string",
          "format": "select",
          "enum": [],
          "options": {
            "dependencies": {
              "helper_access_method": "unity_catalog"
            },
            "async": {
              "label": "Load schemas",
              "action": "list_uc_schemas",
              "autoload": [
                "parameters.destination.catalog"
              ],
              "cache": false
            }
          },
          "propertyOrder": 4
        },
        "table": {
          "title": "Table",
          "type": "string",
          "format": "select",
          "enum": [],
          "options": {
            "tags": true,
            "creatable": true,
            "dependencies": {
              "helper_access_method": "unity_catalog"
            },
            "async": {
              "label": "Load tables",
              "action": "list_uc_tables",
              "autoload": [
                "parameters.destination.schema_name"
              ],
              "cache": false
            }
          },
          "propertyOrder": 5
        },
        "warehouse": {
          "title": "Warehouse used to load table",
          "type": "string",
          "format": "select",
          "enum": [],
          "options": {
            "tooltip": "If not specified, the component will use the 1st returned warehouse",
            "dependencies": {
              "table_type": "native"
            },
            "async": {
              "label": "Load warehouses",
              "action": "list_warehouses"
            }
          },
          "propertyOrder": 26
        },
        "table_type": {
          "enum": [
            "external",
            "native"
          ],
          "type": "string",
          "title": "Table Type",
          "default": "External",
          "options": {
            "enum_titles": [
              "External",
              "Native"
            ],
            "dependencies": {
              "helper_access_method": "unity_catalog"
            }
          },
          "propertyOrder": 6
        },
        "mode": {
          "enum": [
            "error",
            "append",
            "overwrite",
            "upsert"
          ],
          "type": "string",
          "title": "Load Type",
          "default": "append",
          "options": {
            "enum_titles": [
              "Raise error if existing (supported only by Direct Storage tables)",
              "Append",
              "Overwrite",
              "Upsert (supported only by Native tables)"
            ]
          },
          "propertyOrder": 7
        },
        "partition_by": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Columns to partition by",
          "format": "select",
          "options": {
            "tags": true,
            "async": {
              "label": "Re-load columns",
              "action": "list_table_columns",
              "cache": false
            }
          },
          "uniqueItems": true,
          "propertyOrder": 8
        },
        "compression": {
          "enum": [
            "UNCOMPRESSED",
            "SNAPPY",
            "GZIP",
            "BROTLI",
            "LZ4",
            "ZSTD",
            "LZ4_RAW"
          ],
          "type": "string",
          "title": "Compression",
          "default": "UNCOMPRESSED",
          "options": {
            "enum_titles": [
              "UNCOMPRESSED",
              "SNAPPY",
              "GZIP",
              "BROTLI",
              "LZ4",
              "ZSTD",
              "LZ4_RAW"
            ],
            "dependencies": {
              "helper_access_method": "direct_storage"
            }
          },
          "required": true,
          "propertyOrder": 9
        }
      },
      "propertyOrder": 1
    },
    "batch_size": {
      "type": "integer",
      "title": "Batch size",
      "default": 25000,
      "propertyOrder": 2,
      "description": "By default, the extractor will load data in batches of 25 000 rows. You can adjust this value to optimize the performance (or solve OOM) of the writer.",
      "options": {
        "dependencies": {
          "helper_access_method": "direct_storage"
        }
      }
    },
    "preserve_insertion_order": {
      "type": "boolean",
      "title": "Preserve insertion order",
      "format": "checkbox",
      "default": true,
      "description": "If enabled, the writer will preserve the order of the rows in the destination table, when encountering OOM error, disabling this option may help",
      "propertyOrder": 3,
      "options": {
        "dependencies": {
          "helper_access_method": "direct_storage"
        }
      }
    },
    "debug": {
      "type": "boolean",
      "title": "Debug mode",
      "format": "checkbox",
      "default": false,
      "description": "If enabled, the component will produce detailed logs",
      "propertyOrder": 4
    }
  }
}